define(["jquery"],function(a){"use strict";return function(b,c){var d,e,f;if("list"===b[1])a.ajax({type:"GET",url:"http://melpon.org/wandbox/api/list.json",success:function(a){c.write(a),c.done()},error:function(a,b){c.fail(b)}});else{if("run"!==b[1])return c.fail;d=a.inArray("--compiler",b),-1!==d&&d+1<b.length&&(e=b[d+1]),d=a.inArray("--select",b),-1!==d&&d+1<b.length&&(f=a(b[d+1]).text()),d=a.inArray("--code",b),-1!==d&&d+1<b.length&&(f=b[d+1]),a.ajax({type:"POST",url:"http://melpon.org/wandbox/api/compile.json",data:JSON.stringify({compiler:e,code:f}),dataType:"json",success:function(a){c.write(a.program_message),c.done()},error:function(a,b){c.fail(b)}})}}});