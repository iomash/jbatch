define(["jquery"],function(a){"use strict";return function(b,c){if("list"===b[1])a.ajax({type:"GET",url:"http://melpon.org/wandbox/api/list.json",success:function(a){c.write(a),c.done()},error:function(a,b){c.fail(b)}});else{if("run"!==b[1])return c.fail;a.ajax({type:"POST",url:"http://melpon.org/wandbox/api/compile.json",data:JSON.stringify({compiler:b[2],code:a(b[3]).text()}),dataType:"json",success:function(a){c.write(a.program_message),c.done()},error:function(a,b){c.fail(b)}})}}});